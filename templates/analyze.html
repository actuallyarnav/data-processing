{% extends "base.html" %}

{% block head %}
<title>Analyze Dataset | Data Proc</title>
<style>
    .section-card {
        border-radius: 14px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
    }
</style>
{% endblock %}

{% block body %}
<div class="container py-4">

    <!-- Page Header -->
    <div class="mb-4">
        <h2 class="fw-bold">Configure Analysis</h2>
        <p class="text-muted mb-0">
            Dataset: <strong>{{ filename }}</strong>
        </p>
    </div>

    <form action="{{ url_for('generate.generate') }}" method="post">

        <!-- Dataset Overview -->
        <div class="card section-card mb-4">
            <div class="card-body">
                <h5 class="mb-3">Dataset Overview</h5>
                <p class="mb-1">Total Columns: {{ columns | length }}</p>
                <p class="mb-0 text-muted">
                    Select the columns and analysis options below
                </p>
            </div>
        </div>

        <!-- Column Selection -->
        <div class="card section-card mb-4">
            <div class="card-body">
                <h5 class="mb-3">Column Selection</h5>

                <div class="row">
                    <!-- Numeric Columns -->
                    <div class="col-md-6 mb-3">
                        <h6>Numeric Columns</h6>
                        {% for col in columns if col.type == 'numeric' %}
                        <div class="form-check">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                name="numeric_cols"
                                value="{{ col.name }}"
                                id="num-{{ col.name }}"
                            >
                            <label class="form-check-label" for="num-{{ col.name }}">
                                {{ col.name }}
                            </label>
                        </div>
                        {% else %}
                        <p class="text-muted small">No numeric columns detected.</p>
                        {% endfor %}
                    </div>

                    <!-- Categorical Columns -->
                    <div class="col-md-6 mb-3">
                        <h6>Categorical Columns</h6>
                        {% for col in columns if col.type == 'categorical' %}
                        <div class="form-check">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                name="categorical_cols"
                                value="{{ col.name }}"
                                id="cat-{{ col.name }}"
                            >
                            <label class="form-check-label" for="cat-{{ col.name }}">
                                {{ col.name }}
                            </label>
                        </div>
                        {% else %}
                        <p class="text-muted small">No categorical columns detected.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Options -->
        <div class="card section-card mb-4">
            <div class="card-body">
                <h5 class="mb-3">Analysis Options</h5>

                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="checkbox"
                        name="options"
                        value="summary"
                        id="opt-summary"
                    >
                    <label class="form-check-label" for="opt-summary">
                        Summary statistics
                    </label>
                </div>

                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="checkbox"
                        name="options"
                        value="missing"
                        id="opt-missing"
                    >
                    <label class="form-check-label" for="opt-missing">
                        Missing value analysis
                    </label>
                </div>

                <div class="form-check">
                    <input
                        class="form-check-input"
                        type="checkbox"
                        name="options"
                        value="categorical"
                        id="opt-categorical"
                    >
                    <label class="form-check-label" for="opt-categorical">
                        Categorical frequency analysis
                    </label>
                </div>
            </div>
        </div>

        <!-- Submit -->
        <div class="d-grid">
            <button type="submit" class="btn btn-success btn-lg">
                Generate Results
            </button>
        </div>

    </form>

</div>
{% endblock %}
